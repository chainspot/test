import{v as F,l as T,j as l,w as he,B as V}from"./index-DBROXIl2.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],me=F("chevron-left",fe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ge=F("chevron-right",pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],be=F("link",ve);function A(){return A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)({}).hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},A.apply(null,arguments)}function K(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},L(t,e)}function ye(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,L(t,e)}var X=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function _e(t,e){return!!(t===e||X(t)&&X(e))}function Se(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!_e(t[r],e[r]))return!1;return!0}function E(t,e){e===void 0&&(e=Se);var r,o=[],s,p=!1;function x(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];return p&&r===this&&e(g,o)||(s=t.apply(this,g),p=!0,r=this,o=g),s}return x}var xe=typeof performance=="object"&&typeof performance.now=="function",G=xe?function(){return performance.now()}:function(){return Date.now()};function J(t){cancelAnimationFrame(t.id)}function Ce(t,e){var r=G();function o(){G()-r>=e?t.call(null):s.id=requestAnimationFrame(o)}var s={id:requestAnimationFrame(o)};return s}var q=-1;function Q(t){if(t===void 0&&(t=!1),q===-1||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return q}var N=null;function Y(t){if(t===void 0&&(t=!1),N===null||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var o=document.createElement("div"),s=o.style;return s.width="100px",s.height="100px",e.appendChild(o),document.body.appendChild(e),e.scrollLeft>0?N="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?N="negative":N="positive-ascending"),document.body.removeChild(e),N}return N}var Ie=150,Te=function(e,r){return e};function we(t){var e,r=t.getItemOffset,o=t.getEstimatedTotalSize,s=t.getItemSize,p=t.getOffsetForIndexAndAlignment,x=t.getStartIndexForOffset,g=t.getStopIndexForStartIndex,b=t.initInstanceProps,C=t.shouldResetStyleCacheOnItemSizeChange,f=t.validateProps;return e=function(_){ye(I,_);function I(h){var n;return n=_.call(this,h)||this,n._instanceProps=b(n.props,K(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:K(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof n.props.initialScrollOffset=="number"?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=E(function(a,i,c,d){return n.props.onItemsRendered({overscanStartIndex:a,overscanStopIndex:i,visibleStartIndex:c,visibleStopIndex:d})}),n._callOnScroll=void 0,n._callOnScroll=E(function(a,i,c){return n.props.onScroll({scrollDirection:a,scrollOffset:i,scrollUpdateWasRequested:c})}),n._getItemStyle=void 0,n._getItemStyle=function(a){var i=n.props,c=i.direction,d=i.itemSize,v=i.layout,u=n._getItemStyleCache(C&&d,C&&v,C&&c),m;if(u.hasOwnProperty(a))m=u[a];else{var y=r(n.props,a,n._instanceProps),w=s(n.props,a,n._instanceProps),k=c==="horizontal"||v==="horizontal",j=c==="rtl",R=k?y:0;u[a]=m={position:"absolute",left:j?void 0:R,right:j?R:void 0,top:k?0:y,height:k?"100%":w,width:k?w:"100%"}}return m},n._getItemStyleCache=void 0,n._getItemStyleCache=E(function(a,i,c){return{}}),n._onScrollHorizontal=function(a){var i=a.currentTarget,c=i.clientWidth,d=i.scrollLeft,v=i.scrollWidth;n.setState(function(u){if(u.scrollOffset===d)return null;var m=n.props.direction,y=d;if(m==="rtl")switch(Y()){case"negative":y=-d;break;case"positive-descending":y=v-c-d;break}return y=Math.max(0,Math.min(y,v-c)),{isScrolling:!0,scrollDirection:u.scrollOffset<y?"forward":"backward",scrollOffset:y,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._onScrollVertical=function(a){var i=a.currentTarget,c=i.clientHeight,d=i.scrollHeight,v=i.scrollTop;n.setState(function(u){if(u.scrollOffset===v)return null;var m=Math.max(0,Math.min(v,d-c));return{isScrolling:!0,scrollDirection:u.scrollOffset<m?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._outerRefSetter=function(a){var i=n.props.outerRef;n._outerRef=a,typeof i=="function"?i(a):i!=null&&typeof i=="object"&&i.hasOwnProperty("current")&&(i.current=a)},n._resetIsScrollingDebounced=function(){n._resetIsScrollingTimeoutId!==null&&J(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=Ce(n._resetIsScrolling,Ie)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},function(){n._getItemStyleCache(-1,null)})},n}I.getDerivedStateFromProps=function(n,a){return ke(n,a),f(n),null};var S=I.prototype;return S.scrollTo=function(n){n=Math.max(0,n),this.setState(function(a){return a.scrollOffset===n?null:{scrollDirection:a.scrollOffset<n?"forward":"backward",scrollOffset:n,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},S.scrollToItem=function(n,a){a===void 0&&(a="auto");var i=this.props,c=i.itemCount,d=i.layout,v=this.state.scrollOffset;n=Math.max(0,Math.min(n,c-1));var u=0;if(this._outerRef){var m=this._outerRef;d==="vertical"?u=m.scrollWidth>m.clientWidth?Q():0:u=m.scrollHeight>m.clientHeight?Q():0}this.scrollTo(p(this.props,n,a,v,this._instanceProps,u))},S.componentDidMount=function(){var n=this.props,a=n.direction,i=n.initialScrollOffset,c=n.layout;if(typeof i=="number"&&this._outerRef!=null){var d=this._outerRef;a==="horizontal"||c==="horizontal"?d.scrollLeft=i:d.scrollTop=i}this._callPropsCallbacks()},S.componentDidUpdate=function(){var n=this.props,a=n.direction,i=n.layout,c=this.state,d=c.scrollOffset,v=c.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var u=this._outerRef;if(a==="horizontal"||i==="horizontal")if(a==="rtl")switch(Y()){case"negative":u.scrollLeft=-d;break;case"positive-ascending":u.scrollLeft=d;break;default:var m=u.clientWidth,y=u.scrollWidth;u.scrollLeft=y-m-d;break}else u.scrollLeft=d;else u.scrollTop=d}this._callPropsCallbacks()},S.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&J(this._resetIsScrollingTimeoutId)},S.render=function(){var n=this.props,a=n.children,i=n.className,c=n.direction,d=n.height,v=n.innerRef,u=n.innerElementType,m=n.innerTagName,y=n.itemCount,w=n.itemData,k=n.itemKey,j=k===void 0?Te:k,R=n.layout,oe=n.outerElementType,ae=n.outerTagName,ie=n.style,le=n.useIsScrolling,se=n.width,D=this.state.isScrolling,M=c==="horizontal"||R==="horizontal",ce=M?this._onScrollHorizontal:this._onScrollVertical,H=this._getRangeToRender(),ue=H[0],de=H[1],B=[];if(y>0)for(var z=ue;z<=de;z++)B.push(T.createElement(a,{data:w,key:j(z,w),index:z,isScrolling:le?D:void 0,style:this._getItemStyle(z)}));var U=o(this.props,this._instanceProps);return T.createElement(oe||ae||"div",{className:i,onScroll:ce,ref:this._outerRefSetter,style:A({position:"relative",height:d,width:se,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:c},ie)},T.createElement(u||m||"div",{children:B,ref:v,style:{height:M?"100%":U,pointerEvents:D?"none":void 0,width:M?U:"100%"}}))},S._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var n=this.props.itemCount;if(n>0){var a=this._getRangeToRender(),i=a[0],c=a[1],d=a[2],v=a[3];this._callOnItemsRendered(i,c,d,v)}}if(typeof this.props.onScroll=="function"){var u=this.state,m=u.scrollDirection,y=u.scrollOffset,w=u.scrollUpdateWasRequested;this._callOnScroll(m,y,w)}},S._getRangeToRender=function(){var n=this.props,a=n.itemCount,i=n.overscanCount,c=this.state,d=c.isScrolling,v=c.scrollDirection,u=c.scrollOffset;if(a===0)return[0,0,0,0];var m=x(this.props,u,this._instanceProps),y=g(this.props,m,u,this._instanceProps),w=!d||v==="backward"?Math.max(1,i):1,k=!d||v==="forward"?Math.max(1,i):1;return[Math.max(0,m-w),Math.max(0,Math.min(a-1,y+k)),m,y]},I}(T.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var ke=function(e,r){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,r.instance},Pe=we({getItemOffset:function(e,r){var o=e.itemSize;return r*o},getItemSize:function(e,r){var o=e.itemSize;return o},getEstimatedTotalSize:function(e){var r=e.itemCount,o=e.itemSize;return o*r},getOffsetForIndexAndAlignment:function(e,r,o,s,p,x){var g=e.direction,b=e.height,C=e.itemCount,f=e.itemSize,_=e.layout,I=e.width,S=g==="horizontal"||_==="horizontal",h=S?I:b,n=Math.max(0,C*f-h),a=Math.min(n,r*f),i=Math.max(0,r*f-h+f+x);switch(o==="smart"&&(s>=i-h&&s<=a+h?o="auto":o="center"),o){case"start":return a;case"end":return i;case"center":{var c=Math.round(i+(a-i)/2);return c<Math.ceil(h/2)?0:c>n+Math.floor(h/2)?n:c}case"auto":default:return s>=i&&s<=a?s:s<i?i:a}},getStartIndexForOffset:function(e,r){var o=e.itemCount,s=e.itemSize;return Math.max(0,Math.min(o-1,Math.floor(r/s)))},getStopIndexForStartIndex:function(e,r,o){var s=e.direction,p=e.height,x=e.itemCount,g=e.itemSize,b=e.layout,C=e.width,f=s==="horizontal"||b==="horizontal",_=r*g,I=f?C:p,S=Math.ceil((I+o-_)/g);return Math.max(0,Math.min(x-1,r+S-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});const Z=t=>{if(t==null||t.toString()==="0")return"0.00";try{const e=he(BigInt(t)),r=parseFloat(e);return r>0&&r<1e-4?"< 0.0001":r.toFixed(2)}catch(e){return console.error("Error formatting AVAX value:",t,e),"0.00"}},Ne=t=>!t||typeof t!="string"?"":`${t.slice(0,6)}...${t.slice(-4)}`;function ze(t){const e=typeof t=="string"?new Date(t):t;if(!(e instanceof Date)||isNaN(e))return"a moment ago";const r=Math.floor((new Date-e)/1e3);if(r<5)return"just now";let o=r/31536e3;return o>1?`${Math.floor(o)}y ago`:(o=r/2592e3,o>1?`${Math.floor(o)}mo ago`:(o=r/86400,o>1?`${Math.floor(o)}d ago`:(o=r/3600,o>1?`${Math.floor(o)}h ago`:(o=r/60,o>1?`${Math.floor(o)}m ago`:`${Math.floor(r)}s ago`))))}const te=T.memo(({currentPage:t,totalPages:e,onPageChange:r,styles:o})=>e<=1?null:l.jsxs("div",{className:o.paginationControls,children:[l.jsx("button",{className:o.paginationButton,onClick:()=>r(t-1),disabled:t===1,children:l.jsx(me,{size:16})}),l.jsxs("span",{className:o.paginationInfo,children:["Page ",t," of ",e]}),l.jsx("button",{className:o.paginationButton,onClick:()=>r(t+1),disabled:t===e,children:l.jsx(ge,{size:16})})]}));te.displayName="PaginationControls";const ne=T.memo(({item:t,header:e,explorer:r,styles:o})=>{const s=T.useMemo(()=>{if(!t)return null;switch(e.key){case"wallet":return l.jsx("a",{href:`${r}/address/${t.address}`,target:"_blank",rel:"noopener noreferrer",title:t.address,children:Ne(t.address)});case"entranceFee":return t.entranceFeePaid!=null?l.jsxs("span",{children:[Z(t.entranceFeePaid)," AVAX"]}):"N/A";case"won":return t.jackpotAmount!=null?l.jsxs("span",{children:[Z(t.jackpotAmount)," AVAX"]}):"N/A";case"tx":return l.jsx("a",{href:`${r}/tx/${t.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:o.txLink,title:"View Transaction",children:l.jsx(be,{size:16})});case"time":const p=typeof t.timestamp=="string"?new Date(t.timestamp):t.timestamp;return l.jsx("span",{title:p instanceof Date?p.toLocaleString():"Invalid Date",children:ze(p)});default:return l.jsx("span",{children:t[e.key]})}},[t,e,r]);return l.jsx("div",{className:o.virtualTableCell,style:{flex:e.flex||1},"data-label":e.label,children:s})});ne.displayName="TableCell";const $=T.memo(({index:t,style:e,data:r})=>{const{items:o,headers:s,explorer:p,currentPage:x,pageSize:g,styles:b}=r,C=o[t];if(!C)return null;const f=(x-1)*g+t;return l.jsx("div",{className:b.virtualTableRow,style:e,children:s.map(_=>_.key==="#"?l.jsx("div",{className:b.virtualTableCell,style:{flex:_.flex},"data-label":_.label,children:f+1},"#"):l.jsx(ne,{item:C,header:_,explorer:p,styles:b},_.key))})});$.displayName="Row";const re=({headers:t,styles:e})=>l.jsx("div",{className:e.virtualTableRow,style:{height:"53px"},children:t.map(r=>l.jsx("div",{className:e.virtualTableCell,style:{flex:r.flex||1,display:"flex",alignItems:"center"},children:l.jsx("div",{className:e.skeleton,style:{width:"85%",height:"20px",borderRadius:"4px"}})},r.key))});re.displayName="RowSkeleton";const W=T.memo(({headers:t,items:e,isLoading:r,blockExplorerUrl:o,currentPage:s,totalPages:p,onPageChange:x,pageSize:g,styles:b,windowWidth:C})=>{const f=b||{},_=C<=768,I=T.useMemo(()=>({items:e,headers:t,explorer:o,currentPage:s,pageSize:g,styles:f}),[e,t,o,s,g,f]),S=r&&e.length===0;return l.jsxs("div",{className:f.tableContainerWithPagination,children:[l.jsxs("div",{className:f.virtualTableContainer,children:[l.jsx("div",{className:f.virtualTableHeader,children:t.map(h=>l.jsx("div",{className:f.virtualTableHeaderCell,style:{flex:h.flex||1},children:h.label},h.key))}),l.jsx("div",{className:f.tableBody,style:{height:_?"auto":"500px"},children:S?l.jsx("div",{children:[...Array(g)].map((h,n)=>l.jsx(re,{headers:t,styles:f},n))}):e.length===0?l.jsx("div",{className:f.eventItemEmpty,children:"No history to display."}):_?e.map((h,n)=>l.jsx($,{index:n,data:I,style:{}},h.transactionHash||n)):l.jsx(Pe,{height:500,itemCount:e.length,itemSize:53,width:"100%",itemData:I,children:$},s)})]}),l.jsx(te,{currentPage:s,totalPages:p,onPageChange:x,styles:f})]})});W.displayName="HistoryTable";const Oe="_skeleton_q5b9s_23",je="_skeletonRow_q5b9s_45",Re="_skeletonCell_q5b9s_57",Me="_historySection_q5b9s_67",Ee="_tabContainer_q5b9s_95",qe="_tabButton_q5b9s_111",Ae="_activeTab_q5b9s_137",Le="_tabContent_q5b9s_147",$e="_tableContainerWithPagination_q5b9s_149",We="_virtualTableContainer_q5b9s_163",Fe="_virtualTableHeader_q5b9s_173",De="_virtualTableHeaderCell_q5b9s_189",He="_tableBody_q5b9s_213",Be="_virtualTableRow_q5b9s_247",Ue="_virtualTableCell_q5b9s_271",Ve="_txLink_q5b9s_315",Ke="_eventItemEmpty_q5b9s_333",Xe="_paginationControls_q5b9s_353",Ge="_paginationInfo_q5b9s_371",Je="_paginationButton_q5b9s_383",P={skeleton:Oe,"pulse-skeleton":"_pulse-skeleton_q5b9s_1",skeletonRow:je,skeletonCell:Re,historySection:Me,tabContainer:Ee,tabButton:qe,activeTab:Ae,tabContent:Le,tableContainerWithPagination:$e,virtualTableContainer:We,virtualTableHeader:Fe,virtualTableHeaderCell:De,tableBody:He,virtualTableRow:Be,virtualTableCell:Ue,txLink:Ve,eventItemEmpty:Ke,paginationControls:Xe,paginationInfo:Ge,paginationButton:Je},O=10,ee=t=>{const[e,r]=T.useState(1),o=Math.ceil(t.length/O),s=T.useMemo(()=>{const p=(e-1)*O,x=p+O;return t.slice(p,x)},[t,e]);return{currentPage:e,totalPages:o,paginatedItems:s,setCurrentPage:r}},Ye=({allTimeEntries:t,pastWinners:e,isLoadingHistory:r,windowWidth:o})=>{const[s,p]=T.useState("entries"),{currentPage:x,totalPages:g,paginatedItems:b,setCurrentPage:C}=ee(t),{currentPage:f,totalPages:_,paginatedItems:I,setCurrentPage:S}=ee(e),h=[{key:"#",label:"#",flex:.4},{key:"wallet",label:"Wallet",flex:2.5},{key:"entranceFee",label:"Amount",flex:1.5},{key:"time",label:"Time",flex:1.5},{key:"tx",label:"Tx",flex:.5}],n=[{key:"#",label:"#",flex:.4},{key:"wallet",label:"Winner",flex:2.5},{key:"won",label:"Jackpot",flex:1.5},{key:"time",label:"Time",flex:1.5},{key:"tx",label:"Tx",flex:.5}];return l.jsxs("div",{className:P.historySection,children:[l.jsxs("div",{className:P.tabContainer,children:[l.jsx("button",{className:`${P.tabButton} ${s==="entries"?P.activeTab:""}`,onClick:()=>p("entries"),children:"Recent Entries"}),l.jsx("button",{className:`${P.tabButton} ${s==="winners"?P.activeTab:""}`,onClick:()=>p("winners"),children:"Recent Winners"})]}),l.jsx("div",{className:P.tabContent,children:s==="entries"?l.jsx(W,{headers:h,items:b,isLoading:r,blockExplorerUrl:V,currentPage:x,totalPages:g,onPageChange:C,pageSize:O,styles:P,windowWidth:o}):l.jsx(W,{headers:n,items:I,isLoading:r,blockExplorerUrl:V,currentPage:f,totalPages:_,onPageChange:S,pageSize:O,styles:P,windowWidth:o})})]})};export{Ye as default};
